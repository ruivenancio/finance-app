(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{9735:function(e,t,a){Promise.resolve().then(a.bind(a,79685))},79685:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(3827),n=a(64090),s=a(27815),l=a(85754),i=a(10826),d=a(8792);function c(){let[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)([]),[o,u]=(0,n.useState)([]),[m,f]=(0,n.useState)(!0),[x,h]=(0,n.useState)(""),[p,g]=(0,n.useState)(0),[b,v]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[y,w]=(0,n.useState)("EXPENSE"),[C,S]=(0,n.useState)(new Date().toISOString().split("T")[0]),[k,E]=(0,n.useState)(!1),[Z,z]=(0,n.useState)(""),D=async()=>{try{let[e,a,r]=await Promise.all([i.Z.get("/transactions/"),i.Z.get("/accounts/"),i.Z.get("/categories/")]);t(e.data),c(a.data),u(r.data),a.data.length>0&&!b&&v(a.data[0].id)}catch(e){console.error("Failed to fetch data",e)}finally{f(!1)}};(0,n.useEffect)(()=>{D()},[]);let O=async e=>{e.preventDefault();try{let e="EXPENSE"===y?-Math.abs(Number(p)):Math.abs(Number(p));await i.Z.post("/transactions/",{description:x,amount:e,accountId:b,categoryId:j||null,date:new Date(C).toISOString()}),h(""),g(0),D()}catch(e){console.error("Failed to add transaction",e)}},R=async()=>{if(Z)try{let e=await i.Z.post("/categories/",{name:Z,type:y});u([...o,e.data]),N(e.data.id),z(""),E(!1)}catch(e){console.error("Failed to add category",e)}},A=o.filter(e=>e.type===y);return m?(0,r.jsx)("div",{className:"p-24",children:"Loading..."}):(0,r.jsxs)("main",{className:"p-24",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"Transactions"}),(0,r.jsx)(d.default,{href:"/",children:(0,r.jsx)(l.z,{variant:"outline",children:"Back to Dashboard"})})]}),(0,r.jsxs)("div",{className:"grid gap-8 md:grid-cols-2",children:[(0,r.jsxs)(s.Zb,{children:[(0,r.jsx)(s.Ol,{children:(0,r.jsx)(s.ll,{children:"History"})}),(0,r.jsx)(s.aY,{children:0===e.length?(0,r.jsx)("p",{children:"No transactions found."}):(0,r.jsx)("ul",{className:"space-y-4",children:e.map(e=>(0,r.jsxs)("li",{className:"flex justify-between items-center border-b pb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold",children:e.description}),(0,r.jsxs)("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[(0,r.jsx)("span",{children:new Date(e.date).toLocaleDateString()}),e.category&&(0,r.jsx)("span",{className:"bg-gray-100 px-1 rounded",children:e.category.name})]})]}),(0,r.jsxs)("div",{className:e.amount<0?"text-red-500":"text-green-500",children:["$",e.amount.toFixed(2)]})]},e.id))})})]}),(0,r.jsxs)(s.Zb,{children:[(0,r.jsx)(s.Ol,{children:(0,r.jsx)(s.ll,{children:"Add Transaction"})}),(0,r.jsx)(s.aY,{children:(0,r.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"radio",name:"type",value:"EXPENSE",checked:"EXPENSE"===y,onChange:e=>w(e.target.value)})," Expense"]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"radio",name:"type",value:"INCOME",checked:"INCOME"===y,onChange:e=>w(e.target.value)})," Income"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,r.jsx)("input",{className:"w-full p-2 border rounded",value:x,onChange:e=>h(e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Amount"}),(0,r.jsx)("input",{type:"number",step:"0.01",className:"w-full p-2 border rounded",value:p,onChange:e=>g(Number(e.target.value)),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Account"}),(0,r.jsx)("select",{className:"w-full p-2 border rounded",value:b,onChange:e=>v(e.target.value),required:!0,children:a.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Category"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("select",{className:"w-full p-2 border rounded",value:j,onChange:e=>N(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Uncategorized"}),A.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,r.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>E(!k),children:k?"Cancel":"+"})]}),k&&(0,r.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,r.jsx)("input",{className:"flex-1 p-2 border rounded text-sm",placeholder:"New Category Name",value:Z,onChange:e=>z(e.target.value)}),(0,r.jsx)(l.z,{type:"button",size:"sm",onClick:R,children:"Add"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date"}),(0,r.jsx)("input",{type:"date",className:"w-full p-2 border rounded",value:C,onChange:e=>S(e.target.value),required:!0})]}),(0,r.jsx)(l.z,{type:"submit",className:"w-full",children:"Add Transaction"})]})})]})]})]})}},85754:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var r=a(3827),n=a(64090),s=a(59143),l=a(49769),i=a(1657);let d=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:a,variant:n,size:l,asChild:c=!1,...o}=e,u=c?s.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:n,size:l,className:a})),ref:t,...o})});c.displayName="Button"},27815:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},ll:function(){return d}});var r=a(3827),n=a(64090),s=a(1657);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...n})});i.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});d.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...n})});c.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...n})});o.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},10826:function(e,t,a){"use strict";let r=a(73107).Z.create({baseURL:"http://localhost:8000"});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),t.Z=r},1657:function(e,t,a){"use strict";a.d(t,{cn:function(){return s}});var r=a(75504),n=a(51367);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}}},function(e){e.O(0,[234,792,971,69,744],function(){return e(e.s=9735)}),_N_E=e.O()}]);